"use strict";(self.webpackChunkgatsby_starter_blog=self.webpackChunkgatsby_starter_blog||[]).push([[16],{5205:function(a,e,n){n.r(e),n.d(e,{_frontmatter:function(){return o},default:function(){return c}});var m=n(3366),s=(n(7294),n(4983)),t=["components"],o={title:"MySQL 之 JSON数据类型及其在Sequelize下的使用",date:"2019-12-19T03:55:00.000Z",description:"MySQL 5.7添加的新特性 JSON，可以直接在数据库中对JSON对象进行操作",type:"数据库"},p={_frontmatter:o};function c(a){var e=a.components,n=(0,m.Z)(a,t);return(0,s.mdx)("wrapper",Object.assign({},p,n,{components:e,mdxType:"MDXLayout"}),(0,s.mdx)("blockquote",null,(0,s.mdx)("blockquote",{parentName:"blockquote"},(0,s.mdx)("p",{parentName:"blockquote"},"之前一直不知道mysql已经支持了json类型，还一直傻兮兮的用text去存储。从MySQL5.7.8开始，MySql已经支持原生JSON数据类型。"))),(0,s.mdx)("h4",{id:"创建",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h4",href:"#%E5%88%9B%E5%BB%BA","aria-label":"创建 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"创建"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"字段不能设置长度，可以是NULL，但不能有默认值"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"CREATE")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"TABLE")," student ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"id",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"10"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"unsigned")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"NOT")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"NULL")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"AUTO_INCREMENT"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`")," JSON",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"record",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`")," JSON",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"PRIMARY")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"KEY")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"id",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("h4",{id:"插入",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h4",href:"#%E6%8F%92%E5%85%A5","aria-label":"插入 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"插入"),(0,s.mdx)("p",null,"插入JSON格式的字符串，可以是对象形式，也可以是数组形式。插入会检查格式是否正确，如果不正确会插入失败。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"INSERT")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"INTO")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"student",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," record",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"VALUES")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'\'{"id": 1, "name": "xiaoming"}\''),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'[1, 2, 3]'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MySQL"),"提供函数",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON_OBJECT"),",",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON_ARRAY"),"来生成符合格式的数据。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"INSERT")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"INTO")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`"),"student",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"`")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," record",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"VALUES")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"JSON_OBJECT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaohong"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," JSON_ARRAY",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("p",null,(0,s.mdx)("a",{parentName:"p",href:"http://dev.mysql.com/doc/refman/5.7/en/json-creation-functions.html"},"更多函数参考")),(0,s.mdx)("h4",{id:"查询",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h4",href:"#%E6%9F%A5%E8%AF%A2","aria-label":"查询 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"查询"),(0,s.mdx)("h5",{id:"查询字段",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5","aria-label":"查询字段 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"查询字段"),(0,s.mdx)("p",null,"查询",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"中的数据用",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"column->path"),"的形式。对象类型为",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"$.path"),"，数组类型为",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"$[index]")),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},"mysql",(0,s.mdx)("span",{parentName:"code",className:"token operator"},">")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SELECT")," id",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.id'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," record",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$[0]'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," record",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$[2]'")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"FROM")," student",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+--------------+----------------+----------------+----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.id'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$[0]'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$[2]'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+--------------+----------------+----------------+----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),"            ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),"              ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),"              ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),"            ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaohong"'),"     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),"              ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),"              ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+--------------+----------------+----------------+----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"rows")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"in")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"set")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"0.00")," sec",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.mdx)("p",null,"这样查询的结果会带有双引号，使用函数",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON_UNQUOTE"),"或操作符",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"->>"),"可以去掉。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},"mysql",(0,s.mdx)("span",{parentName:"code",className:"token operator"},">")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SELECT")," id",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," JSON_UNQUOTE",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">>"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"FROM")," student",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+----------------+------------------------------+-----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," JSON_UNQUOTE",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">>"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+----------------+------------------------------+-----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," xiaoming                     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," xiaoming        ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaohong"'),"     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," xiaoming                     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," xiaoming        ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+----------------+------------------------------+-----------------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"rows")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"in")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"set")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"0.00")," sec",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.mdx)("h5",{id:"条件搜索",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#%E6%9D%A1%E4%BB%B6%E6%90%9C%E7%B4%A2","aria-label":"条件搜索 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"条件搜索"),(0,s.mdx)("p",null,"以",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"作为条件搜索的时候，不能直接和字符串比较，是无法匹配到的，可以通过",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"CAST"),"将字符串转成",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"的形式。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SELECT")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"*")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"FROM")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," info ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," CAST",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'\'{"id": 1, "name": "xiaoming"}\'')," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"as")," JSON",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("p",null,"通过",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"中的元素进行查询，同样使用",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"column->path"),"形式。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SELECT")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"*")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"FROM")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'xiaoming'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"值得注意的是，JSON中的元素搜索是严格区分数据类型的，整型和字符串不能相匹配")),(0,s.mdx)("h4",{id:"更新",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h4",href:"#%E6%9B%B4%E6%96%B0","aria-label":"更新 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"更新"),(0,s.mdx)("p",null,"整个",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"更新，和插入时类似。更新",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JSON"),"下的元素，需要使用下列函数。"),(0,s.mdx)("h5",{id:"1-json_insert-插入新值但不会覆盖已存在的值",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#1-json_insert-%E6%8F%92%E5%85%A5%E6%96%B0%E5%80%BC%E4%BD%86%E4%B8%8D%E4%BC%9A%E8%A6%86%E7%9B%96%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%80%BC","aria-label":"1 json_insert 插入新值但不会覆盖已存在的值 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"1. ",(0,s.mdx)("code",{parentName:"h5",className:"language-text"},"JSON_INSERT()")," 插入新值，但不会覆盖已存在的值。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},"mysql",(0,s.mdx)("span",{parentName:"code",className:"token operator"},">")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"UPDATE")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SET")," category ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," JSON_INSERT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'xiaohua'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.class'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'one'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\nQuery OK",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"row")," affected ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"0.00")," sec",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info                                           ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record    ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"class"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"one"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"}  ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"4"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaohong"'),"}                  ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+------------------------------------------------+-----------+")))),(0,s.mdx)("h5",{id:"2-json_set-插入新值并覆盖已存在的值",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#2-json_set-%E6%8F%92%E5%85%A5%E6%96%B0%E5%80%BC%E5%B9%B6%E8%A6%86%E7%9B%96%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%80%BC","aria-label":"2 json_set 插入新值并覆盖已存在的值 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"2. ",(0,s.mdx)("code",{parentName:"h5",className:"language-text"},"JSON_SET()")," 插入新值，并覆盖已存在的值。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"UPDATE")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SET")," info ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," JSON_SET",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.age'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'1'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.class'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'two'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info                                                      ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record    ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"class"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"two"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"age"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"1"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"} ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"4"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaohong"'),"}                             ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+")))),(0,s.mdx)("h5",{id:"3-json_replace-只替换存在的值不存在的则会被忽略",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#3-json_replace-%E5%8F%AA%E6%9B%BF%E6%8D%A2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%80%BC%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%99%E4%BC%9A%E8%A2%AB%E5%BF%BD%E7%95%A5","aria-label":"3 json_replace 只替换存在的值不存在的则会被忽略 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"3. ",(0,s.mdx)("code",{parentName:"h5",className:"language-text"},"JSON_REPLACE()")," 只替换存在的值，不存在的则会被忽略。"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"UPDATE")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SET")," info ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," JSON_REPLACE",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'Lily'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.class'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'three'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info                                                      ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record    ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"class"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"two"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"age"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"1"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"} ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"4"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Lily"'),"}                                 ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-----------------------------------------------------------+-----------+")))),(0,s.mdx)("h5",{id:"4-json_remove-删除json元素",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h5",href:"#4-json_remove-%E5%88%A0%E9%99%A4json%E5%85%83%E7%B4%A0","aria-label":"4 json_remove 删除json元素 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"4. ",(0,s.mdx)("code",{parentName:"h5",className:"language-text"},"JSON_REMOVE()")," 删除JSON元素"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},(0,s.mdx)("pre",{parentName:"div",className:"language-sql"},(0,s.mdx)("code",{parentName:"pre",className:"language-sql"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"UPDATE")," student ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"SET")," info ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," JSON_REMOVE",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"info",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.class'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.age'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"WHERE")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," id ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," info                          ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," record    ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-------------------------------+-----------+"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"xiaoming"'),"} ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"4"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," {",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"2"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"name"'),": ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Lily"'),"}     ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"3"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"5"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"+"),(0,s.mdx)("span",{parentName:"code",className:"token comment"},"----+-------------------------------+-----------+")))),(0,s.mdx)("h4",{id:"在sequelize下进行更新操作",style:{position:"relative"}},(0,s.mdx)("a",{parentName:"h4",href:"#%E5%9C%A8sequelize%E4%B8%8B%E8%BF%9B%E8%A1%8C%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C","aria-label":"在sequelize下进行更新操作 permalink",className:"anchor before"},(0,s.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"在Sequelize下进行更新操作"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"javascript"},(0,s.mdx)("pre",{parentName:"div",className:"language-javascript"},(0,s.mdx)("code",{parentName:"pre",className:"language-javascript"},"student",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"update"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  info",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),"Sequelize",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"fn"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'上述三种方法'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," Sequelize",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"col"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'info'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'$.name'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),(0,s.mdx)("span",{parentName:"code",className:"token string"},"'Lucy'"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))))}c.isMDXComponent=!0},3366:function(a,e,n){function m(a,e){if(null==a)return{};var n,m,s={},t=Object.keys(a);for(m=0;m<t.length;m++)n=t[m],e.indexOf(n)>=0||(s[n]=a[n]);return s}n.d(e,{Z:function(){return m}})}}]);
//# sourceMappingURL=component---src-pages-notebook-database-mysql-json-md-b1292f00c06e391be049.js.map