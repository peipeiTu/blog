"use strict";(self.webpackChunkgatsby_starter_blog=self.webpackChunkgatsby_starter_blog||[]).push([[221],{2472:function(a,e,m){m.r(e),m.d(e,{_frontmatter:function(){return s},default:function(){return d}});var n=m(3366),t=(m(7294),m(4983)),l=["components"],s={title:"GTM 概述",date:"2019-09-20T05:44:04.284Z",description:"Google Tag Manager基础入门",type:"Google Tag Manager"},p={_frontmatter:s};function d(a){var e=a.components,m=(0,n.Z)(a,l);return(0,t.mdx)("wrapper",Object.assign({},p,m,{components:e,mdxType:"MDXLayout"}),(0,t.mdx)("p",null,(0,t.mdx)("code",{parentName:"p",className:"language-text"},"Google Tag Manger")," 用于减轻埋点负担，将大部分工作从网页编码中移出，当它和",(0,t.mdx)("code",{parentName:"p",className:"language-text"},"Google Analytics"),"结合使用时，相当于插入了谷歌分析和网页代码之间，所以不再需要在网页中使用",(0,t.mdx)("code",{parentName:"p",className:"language-text"},"gtag.js"),"等。"),(0,t.mdx)("h5",{id:"-容器",style:{position:"relative"}},(0,t.mdx)("a",{parentName:"h5",href:"#-%E5%AE%B9%E5%99%A8","aria-label":" 容器 permalink",className:"anchor before"},(0,t.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,t.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"# 容器"),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},"包含一个项目，拥有一个容器码，用于嵌入网页。"),(0,t.mdx)("li",{parentName:"ul"},"嵌入代码有两段，在",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"管理 → 安装Google跟踪代码管理器")," 中可以找到 ",(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},"第一段嵌入",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"<head>"),"中，尽量靠顶 ",(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("div",{parentName:"li",className:"gatsby-highlight","data-language":"javascript"},(0,t.mdx)("pre",{parentName:"div",className:"language-javascript"},(0,t.mdx)("code",{parentName:"pre",className:"language-javascript"}," ",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"function"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.mdx)("span",{parentName:"code",className:"token parameter"},"w",(0,t.mdx)("span",{parentName:"span",className:"token punctuation"},","),"d",(0,t.mdx)("span",{parentName:"span",className:"token punctuation"},","),"s",(0,t.mdx)("span",{parentName:"span",className:"token punctuation"},","),"l",(0,t.mdx)("span",{parentName:"span",className:"token punctuation"},","),"i"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n   w",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"l",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),"w",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"l",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"||"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n   w",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"l",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,t.mdx)("span",{parentName:"code",className:"token function"},"push"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n     ",(0,t.mdx)("span",{parentName:"code",className:"token string"},"'gtm.start'"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"span ",(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"ag-soft-line-break"'),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,t.mdx)("span",{parentName:"code",className:"token class-name"},"Date"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,t.mdx)("span",{parentName:"code",className:"token function"},"getTime"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n     event",(0,t.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'gtm.js'"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"var")," f",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),"d",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,t.mdx)("span",{parentName:"code",className:"token function"},"getElementsByTagName"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"s",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,t.mdx)("span",{parentName:"code",className:"token number"},"0"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"span ",(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"ag-soft-line-break"'),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"j",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),"d",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,t.mdx)("span",{parentName:"code",className:"token function"},"createElement"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"s",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n   dl",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),"l",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"!="),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'dataLayer'"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"?"),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'&l='"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"+"),"l",(0,t.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,t.mdx)("span",{parentName:"code",className:"token string"},"''"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n   j",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"async",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n   j",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"src",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"span ",(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"ag-soft-line-break"'),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'https://www.googletagmanager.com/gtm.js?id='"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"+"),"i",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"+"),"dl",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"f",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"parentNode",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,t.mdx)("span",{parentName:"code",className:"token function"},"insertBefore"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"j",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),"f",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"span ",(0,t.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"ag-soft-line-break"'),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"window",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),"document",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'script'"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'dataLayer'"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},","),(0,t.mdx)("span",{parentName:"code",className:"token string"},"'GTM-MGJBX6K'"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n ")))))),(0,t.mdx)("li",{parentName:"ul"},"第二段代码紧跟起始",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"<body>"),"，是预览时弹出的调试窗口"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("div",{parentName:"li",className:"gatsby-highlight","data-language":"javascript"},(0,t.mdx)("pre",{parentName:"div",className:"language-javascript"},(0,t.mdx)("code",{parentName:"pre",className:"language-javascript"},"   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"!"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"--")," Google Tag ",(0,t.mdx)("span",{parentName:"code",className:"token function"},"Manager")," ",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"noscript",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"--"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"noscript",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n     ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),"iframe src",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"https://www.googletagmanager.com/ns.html?id=GTM-MGJBX6K"')," height",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"0"')," width",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"0"')," style",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,t.mdx)("span",{parentName:"code",className:"token string"},'"display:none;visibility:hidden"'),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n     ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"iframe",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"/"),"noscript",(0,t.mdx)("span",{parentName:"code",className:"token operator"},">"),"\n   ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"<"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"!"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},"--")," End Google Tag ",(0,t.mdx)("span",{parentName:"code",className:"token function"},"Manager")," ",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"noscript",(0,t.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,t.mdx)("span",{parentName:"code",className:"token operator"},"--"),(0,t.mdx)("span",{parentName:"code",className:"token operator"},">")))))))),(0,t.mdx)("h5",{id:"-变量-variable",style:{position:"relative"}},(0,t.mdx)("a",{parentName:"h5",href:"#-%E5%8F%98%E9%87%8F-variable","aria-label":" 变量 variable permalink",className:"anchor before"},(0,t.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,t.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"# 变量 (variable)"),(0,t.mdx)("p",null,"主要分为",(0,t.mdx)("code",{parentName:"p",className:"language-text"},"内置变量"),"和",(0,t.mdx)("code",{parentName:"p",className:"language-text"},"用户定义的变量")),(0,t.mdx)("p",null,"内置变量需要勾选生效，没有使用的默认不开启："),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"网页")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Page URL")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Page Hostname")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Page Path")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Referrer")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"实用工具")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Event")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Environment Name")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Container Version")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Random Number")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"HTML ID")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"错误")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Error Message")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Error URL")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Error Line")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Debug Mode")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"点击")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click Element"),"：点击的DOM元素对象"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click Classes")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click ID")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click Target")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click URL")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Click Text")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"表单")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form Element")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form Classes"))),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form ID")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form Target")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form URL")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Form Text")," "))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"历史记录")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"New History Fragment")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Old History Fragement")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"New History State")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Old History State")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"History Source")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"视频")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Provider")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Status")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video URL")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Title")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Duration")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Current Time")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Percent")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Video Visible")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"滚动")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Scroll Depth Threshold")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Scroll Depth Units")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Scroll Direction")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"公开范围")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Percent Visible")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"On-Screen Duration"))))),(0,t.mdx)("p",null,"自定义变量："),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"导航")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"网址")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Http引荐来源网址")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"网页变量")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"第一方Cookie"),"：返回浏览器cookie中该变量的值"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"数据层变量"),"：通过dataLayer.push传递的键值对"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"未定义的值")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"自定义javascript"),"：自己写的js函数的返回值，其中可以用",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"{{}}"),"来使用已存在的变量"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"javascript变量"),"：抓取页面的全局变量"))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"页面元素")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"元素可见性")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"自动事件变量")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"DOM元素")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"实用工具")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"常量")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"对照表"),"：根据输入值的不同，然后返回对应的输出值，类似switch"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"环境名称")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"随机数字"),"：0~2147483647的随机数 (含边界)"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"正则表达式表格"),"：输入值用正则来匹配的对照表"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"自定义事件")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"Google Analytics(分析) 设置")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},(0,t.mdx)("strong",{parentName:"p"},"容器数据")),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"调试模式"),"：当处于调试模式时，该值为true"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"容器ID")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"容器版本号"))))),(0,t.mdx)("h5",{id:"-触发器",style:{position:"relative"}},(0,t.mdx)("a",{parentName:"h5",href:"#-%E8%A7%A6%E5%8F%91%E5%99%A8","aria-label":" 触发器 permalink",className:"anchor before"},(0,t.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,t.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"# 触发器"),(0,t.mdx)("p",null,"制定规则，即规定好触发代码的条件"),(0,t.mdx)("p",null,"触发器类型："),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},"网页浏览"),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"DOM已准备就绪")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"窗口已加载")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"网页浏览")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},"点击"),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"仅链接")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"所有元素")))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},"用户深度互动情况"),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"YouTube视频")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"元素可见性")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"滚动深度")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"表单提交"),"：",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"form"),"提交成功的跟踪，需要",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"form"),"最后的提交按钮类型是submit才能触发。"))),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},"其他"),(0,t.mdx)("ul",{parentName:"li"},(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"JavaScript错误")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"历史记录更改"),"：网址的变化跟踪，可用于单页应用的网页浏览跟踪。"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"定时器")),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"自定义事件"),"：通过",(0,t.mdx)("code",{parentName:"li",className:"language-text"},"dataLayer.push({event:事件})"),"触发，跟踪不便通过前端变化定位的事件。"),(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("code",{parentName:"li",className:"language-text"},"触发器组"))))),(0,t.mdx)("h5",{id:"-代码",style:{position:"relative"}},(0,t.mdx)("a",{parentName:"h5",href:"#-%E4%BB%A3%E7%A0%81","aria-label":" 代码 permalink",className:"anchor before"},(0,t.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,t.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"# 代码"),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},(0,t.mdx)("p",{parentName:"li"},"设定类型和触发器，即满足触发条件之后，向某个统计工具发送指定的消息。"),(0,t.mdx)("ol",{parentName:"li"},(0,t.mdx)("li",{parentName:"ol"},"Universal Analytics：向特定的GA view发送数据"),(0,t.mdx)("li",{parentName:"ol"},"自定义html：向页面插入代码，可用于事件监控，再营销代码部署，GA基础代码部署")))),(0,t.mdx)("h5",{id:"-gtm-debug",style:{position:"relative"}},(0,t.mdx)("a",{parentName:"h5",href:"#-gtm-debug","aria-label":" gtm debug permalink",className:"anchor before"},(0,t.mdx)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,t.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"# GTM debug"),(0,t.mdx)("ul",null,(0,t.mdx)("li",{parentName:"ul"},"线上预览"),(0,t.mdx)("li",{parentName:"ul"},"demo站点")))}d.isMDXComponent=!0},3366:function(a,e,m){function n(a,e){if(null==a)return{};var m,n,t={},l=Object.keys(a);for(n=0;n<l.length;n++)m=l[n],e.indexOf(m)>=0||(t[m]=a[m]);return t}m.d(e,{Z:function(){return n}})}}]);
//# sourceMappingURL=component---src-pages-notebook-gtm-overview-md-1046e8f5263d816af8d0.js.map