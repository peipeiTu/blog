{"componentChunkName":"component---src-templates-blog-post-js","path":"/notebook/gtm/ga-user-id-replace/","result":{"data":{"markdownRemark":{"html":"<h4>1. 设定GA中的User-ID</h4>\n<ul>\n<li><code class=\"language-text\">管理 → 媒体资源→ 跟踪信息 → User-ID</code>,同意启用User-ID政策</li>\n<li>下一步<code class=\"language-text\">设置User-ID</code>，不用管</li>\n<li>下一步，<code class=\"language-text\">创建User-ID视图</code></li>\n</ul>\n<hr>\n<h4>2. 在GTM中获取User ID的方法</h4>\n<h6># 让开发者使用<code class=\"language-text\">datalayer</code>方式传递User ID</h6>\n<ul>\n<li>开发者通过<code class=\"language-text\">windows.dataLayer.push({userId:&#39;123456&#39;})</code>传递ID</li>\n<li>在GTM 的变量中，声明好变量<code class=\"language-text\">User_id</code>，类型为<code class=\"language-text\">数据层变量</code>，命名与开发者传递的一致</li>\n</ul>\n<h6># 将ID存储在cookie中</h6>\n<ul>\n<li>开发者将ID存储在cookie中，可以在GTM中的自定义变量 - cookie中获取。</li>\n</ul>\n<h6># 使用javascript变量寻找ID</h6>\n<ul>\n<li>当ID存在于js全局变量中时，可以使用。</li>\n</ul>\n<h6># 在DOM中寻找ID</h6>\n<ul>\n<li>当页面展示内容中存在ID，可以通过DOM获取ID。</li>\n</ul>\n<h6># 在URL中找ID</h6>\n<hr>\n<h4>3. 更新GA设置变量</h4>\n<ul>\n<li>在之前配置好的<code class=\"language-text\">GA设置</code>变量中，选择更多设置，添加字段<code class=\"language-text\">userId - {{userId}}</code>,将在上一步中定义好的变量赋值给userId</li>\n<li>在GA中新建好userId维度，同时在<code class=\"language-text\">GA设置</code>中设置维度，注意维度的ID要一致，也赋值userId</li>\n</ul>","frontmatter":{"title":"GTM 替换GA中的用户ID","date":"2019-09-29T03:31:19.284Z","description":"替换GA中的用户ID，和系统用户体系联系起来","type":"Google Tag Manager"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/notebook/gtm/ga-user-id-replace/","previous":{"fields":{"slug":"/notebook/gtm/ga-type/"},"frontmatter":{"title":"GTM 中支持的GA类型"}},"next":{"fields":{"slug":"/notebook/database/transaction_and_lock/"},"frontmatter":{"title":"事务和锁（包含Sequelize下的操作）"}}}}}